{
  "$schema": "schema.json",
  "initialState": "idle",
  "states": {
    "idle": {
      "SUBMIT": {
        "target": "submitting",
        "post": {
          "url": "/api",
          "body": [
            ["input[name='todo']", "value"],
            ["input[name='todo']", "value"]
          ],
          "success": {
            "trigger": "SUCCESS"
          }
        }
      }
    },
    "submitting": {
      "domx": [
        ["#input", "setAttribute", "disabled", "true"],
        ["#btn", "setAttribute", "disabled", "true"],
        ["#input", "focus"]
      ],
      "on": ["SUCCESS", "success"]
    },
    "success": {
      "domx": [
        ["#input", "removeAttribute", "disabled"],
        ["#btn", "removeAttribute", "disabled"],
        ["#input", "value", ""],
        ["#input", "focus"],
        ["#list", "append", "domx", "newTodo"]
      ],
      "on": ["SUBMIT", "idle"]
    }
  }
}
