<html lang="en">
  <head>
    <title>domx</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="linttrapmedia" />
    <meta name="keywords" content="web, development, simple, domx, dom, html, css, javascript" />
    <meta name="robots" content="index, follow" />
    <meta name="theme-color" content="#000000" />

    <meta name="description" content="Making Web Development Simple Again" />
    <meta name="favicon" content="/static/images/favicon.svg" />
    <link rel="stylesheet" href="/static/styles/styles.css" />
    <link rel="stylesheet" href="/static/styles/prism.css" />
    <script defer src="/static/scripts/dom-x.js"></script>
    <script defer src="/static/scripts/prism.min.js"></script>
    <script defer src="/static/scripts/prism-markup.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Y0MV1R2QMP"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-Y0MV1R2QMP");
    </script>
  </head>
  <body>
    <dom-x src="/api/stoplight.json"></dom-x>

    <div class="github">
      <a href="https://github.com/linttrapmedia/domx" target="_blank"
        ><img src="static/images/github.svg" width="50%"
      /></a>
    </div>
    <div class="ui">
      <!-- Header -->
      <section>
        <header class="header">
          <div class="header__logo">
            <h1 class="header__title">domx</h1>
            <span class="header__version">0.1.1</span>
          </div>
          <p class="header__subtitle">Say Goodbye to 80% of Your Frontend</p>
          <p class="header__description">
            Transform the DOM with a simple state machine modeled in JSON and remove 80% of all the nonsense. No
            javascript, no libraries, no transpilers, just simple, clean, efficient code.
          </p>
        </header>
      </section>

      <!-- Get Started -->
      <section>
        <div class="subsection">
          <div class="title">
            <h2 class="title__main">Download</h2>
            <p class="title__sub">~1.7KB!</p>
          </div>
          <div class="flex">
            <a href="https://unpkg.com/@linttrap/domx@latest/dist/dom-x.min.js" class="download"
              >dom-x.min.js &nbsp; (â†“)</a
            >
          </div>
        </div>
      </section>

      <!-- Include the script in your HTML file: -->
      <section>
        <div class="subsection">
          <div class="title">
            <h2 class="title__main">Include It</h2>
            <p class="title__sub">Add the script the head</p>
          </div>
          <pre>
            <code class="language-markup">&lt;script src="/static/scripts/dom-x.js"&gt;&lt;/script&gt;</code>
          </pre>
        </div>
      </section>

      <!-- Custom Element -->

      <section>
        <div class="subsection">
          <div class="title">
            <h2 class="title__main">Add The Custom Element</h2>
            <p class="title__sub">This loads the state machine</p>
          </div>
          <pre>
              <code class="language-markup">&lt;dom-x src="stoplight.json"&gt;&lt;/dom-x&gt;</code>
          </pre>
        </div>

        <div class="subsection">
          <div class="title">
            <h2 class="title__main">Add Markup</h2>
            <p class="title__sub">This is the markup the state machine will operate on.</p>
          </div>
          <pre><code class="language-markup">&lt;div id="stoplight"&gt;
  &lt;div id="stoplight__red"&gt;&lt;/div&gt;
  &lt;div id="stoplight__yellow"&gt;&lt;/div&gt;
  &lt;div id="stoplight__green"&gt;&lt;/div&gt;
&lt;/div&gt;</code>
            </pre>
        </div>

        <div class="subsection">
          <div class="title">
            <h2 class="title__main">Demo</h2>
            <p class="title__sub">Click the stoplight</p>
          </div>
          <div class="flex mobile:flex--col">
            <div class="stoplight">
              <div class="stoplight__red"></div>
              <div class="stoplight__yellow"></div>
              <div class="stoplight__green"></div>
            </div>
          </div>
        </div>

        <div class="subsection">
          <div class="title">
            <h3 class="title__main">Define A State Machine</h3>
            <p class="title__sub">stoplight.json</p>
          </div>
          <pre><code class="language-javascript">{
  "initialState": "red",
  "listeners": [["#stoplight", "click", "changeState"]],
  "states": {
    "red": {
      "entry": [
        ["addClass", "#stoplight__red", "active"],
        ["removeClass", "#stoplight__green", "active"],
        ["dispatch", "changeState", 2000]
      ],
      "changeState": [["state", "yellow"]]
    },
    "yellow": {
      "entry": [
        ["addClass", "#stoplight__yellow", "active"],
        ["removeClass", "#stoplight__red", "active"],
        ["dispatch", "changeState", 2000]
      ],
      "changeState": [["state", "green"]]
    },
    "green": {
      "entry": [
        ["addClass", "#stoplight__green", "active"],
        ["removeClass", "#stoplight__yellow", "active"],
        ["dispatch", "changeState", 2000]
      ],
      "changeState": [["state", "red"]]
    }
  }
  }</code></pre>
        </div>
      </section>

      <!-- Justification -->
      <section>
        <div class="subsection">
          <div class="title">
            <h2 class="title__main">How Is That Better!?</h2>
            <p class="title__sub">In Short:</p>
          </div>
          <p>
            Behavior is local (no more following wires), the state is modeled (the only thing that's actually hard),
            less client/server coupling (it's all backend) and it's toolable (you can write your own transformers). And
            in the end, it's just a lot less code and complexity.
          </p>
        </div>
      </section>

      <section>
        <div class="subsection">
          <div class="title">
            <h2 class="title__main">Transformers</h2>
            <p class="title__sub">All The Things You Can Do</p>
          </div>
          <pre><code class="language-javascript">
// Name: Append
// Desc: Append to element
// Type: [transformer: "append", selector: string, html: string];
["append", "#list", "&lt;li&gt;new item&lt;/li&gt;"],

// Name: Attr
// Desc: Set an attribute
// Type: [transformer: "attr", selector: string, attr: string, value: string];
["attr", "#dialog", "open", "true"],

// Name: Add Event Listener
// Desc: Attach an event handler to trigger an action
// Type: [transformer: "addEventListener", selector: string, event: string, stateEvent:string];
["addEventListener", "#btn", "click", "changeState"],

// Name: Dispatch
// Desc: Dispatch an action
// Type: [transformer: "dispatch", action: string, delay?: number];
["dispatch", "reset", 2000],

// Name: Get
// Desc: Trigger a get request and process the result (a transformation object)
// Type: [transformer: "get", url: string, ...args: any[]];
["get", "/some/endpoint"],

// Name: History
// Desc: Update the browser history
// Type: [transformer: "history", method: string, ...args: (string | number)[]];
["history", "pushState", {}, "Record List", "/records/list"],

// Name: Location
// Desc: Update the browser location
// Type: [transformer: "location", url:string];
["location", "/records/list"],

// Name: Post
// Desc: Post selected data to endpoint and process the result (a transformation object)
// Type: [transformer: "post", url: string, ...data: [key: string, selector: string, val: "value" | "dataset" | "formData"][]];
["post", "/some/endpoint", [
  ["form-data", "#todoForm", "formData"]
]],

// Name: Remove attribute
// Desc: Remove an attribute
// Type: [transformer: "removeAttribute", selector: string, attr: string];
["removeAttribute", "#dialog", "open"],

// Name: Remove class
// Desc: Remove a class
// Type: [transformer: "removeClass", selector: string, className: string];
["removeClass", "#dialog", "open"],

// Name: RemoveEventListener
// Desc: Remove an event listener
// Type: [transformer: "removeEventListener", selector: string, event: string, stateEvent: string];
["removeEventListener", "#btn", "click", "changeState"],

// Name: Replace
// Desc: Replace an element
// Type: [transformer: "replace", selector: string, html: string];
["replace", "#list", "&lt;li&gt;updated item&lt;/li&gt;"],

// Name: SetAttribute
// Desc: Set an attribute
// Type: [transformer: "setAttribute", selector: string, attr: string, value: string];
["setAttribute", "#dialog", "open", "true"],

// Name: State
// Desc: Change current state
// Type: [transformer: "state", state: string];
["state", "processing"],

// Name: Text content
// Desc: Set the text content of an element
// Type: [transformer: "textContent", selector: string, text: string];
["textContent", "#dialog", "Processing..."],

// Name: Wait
// Desc: Add a wait between transformations
// Type: [transformer: "wait", ms: number];
["wait", 2000],

// Name: Window
// Desc: Call a method on the window object
// Type: [transformer: "win", method: string, ...args: any[]];
["window", "alert", "Hello World!"],
</code></pre>
        </div>
      </section>

      <!-- Custom Transformer -->
      <section>
        <div class="subsection">
          <div class="title">
            <h2 class="title__main">Write Your Own Transformer</h2>
            <p class="title__sub">Take a look at the "customTransformer" transformer</p>
          </div>
          <pre>
      <code class="language-javascript">// first define the function
function addCustomTransformer(domxInstance: Domx, arg1: string, arg2: string) {
  // ...do your worst...
}

// then register it to a dom-x tag instance
const domx = document.querySelector("dom-x") as Domx;
domx.addTransformer("customTransformer", addCustomTransformer);

// in your state machine you can now use it
["customTransformer", "argument one", "argument two"]
</code>
    </pre>
        </div>
      </section>

      <!-- What Next? -->
      <section>
        <div class="subsection">
          <div class="title">
            <h2 class="title__main">What Else?</h2>
            <p class="title__sub">
              Couple domx with my other library,
              <a href="https://linttrapmedia.github.io/capui/" target="_blank">cap ui</a>
            </p>
          </div>
          <p>
            cap ui is a set of cut and paste ui components. The state/behavior of the components are expressed via BEM
            syntax which means adding/removing classes pretty much controls everything. This makes domx and cap ui a
            match made in heaven.
          </p>
        </div>
      </section>
      <section>
        <p style="opacity: 0.5">
          Â©Copyright 2024 All rights reserved. Made in the USA ðŸ‡ºðŸ‡¸ by
          <a href="https://kevinlint.com" target="_blank">Kevin Lint</a> as a product of
          <a href="https://linttrap.media" target="_blank">Lint Trap Media</a>.
        </p>
      </section>
    </div>
  </body>
</html>
