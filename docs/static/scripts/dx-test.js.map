{
  "version": 3,
  "sources": ["../../../node_modules/@linttrap/oem/src/html/HTML.ts", "../../../src/components/dx-test.ts"],
  "sourcesContent": ["import { HtmlReturnType } from '../types';\n\nconst selectorMap = new Map<string, [any[], any]>();\n\nconst matchObserver = new MutationObserver((mutations) => {\n  mutations.forEach((mutation) => {\n    if (mutation.addedNodes.length > 0 && mutation.type === 'childList') {\n      for (const node of mutation.addedNodes) {\n        if (node instanceof Element) {\n          for (const [selector, [props, config]] of selectorMap.entries()) {\n            const els = node.querySelectorAll(selector);\n            for (const el of els) HtmlTag(el as HTMLElement, props, config);\n          }\n        }\n      }\n    }\n  });\n});\nmatchObserver.observe(document, { attributes: true, childList: true, subtree: true });\n\nfunction AdoptElBySelector(selector: string, watch: boolean = true, config: any) {\n  return (...props: any[]) => {\n    // on mutation\n    if (watch) selectorMap.set(selector, [props, config]);\n    // onload\n    const els = document.querySelectorAll(selector);\n    for (const el of els) HtmlTag(el as HTMLElement, props, config);\n  };\n}\n\nfunction AdoptElByInstance(el: HTMLElement, config: any) {\n  return (...props: any[]) => HtmlTag(el, props, config);\n}\n\nfunction CreateEl(tag: string, config: any) {\n  return (...props: any[]) => {\n    const ns = 'http://www.w3.org/1999/xhtml';\n    const el = document.createElementNS(ns, tag as string);\n    return HtmlTag(el, props, config);\n  };\n}\n\nfunction HtmlTag(el: HTMLElement, traits: any[] = [], config: any = {}) {\n  traits.forEach(([trait, ...args]) => config[trait](el, ...args));\n  function fn(...children: any[]) {\n    children.forEach((child) => el.append(child));\n    return el;\n  }\n  return fn;\n}\n\nexport function HTML<P extends Record<string, any>>(config?: P) {\n  return new Proxy(\n    {},\n    {\n      get: (_, prop) => {\n        if (prop === 'el') return (el: HTMLElement) => AdoptElByInstance(el, config);\n        if (prop === '$el') return (selector: string, watch: boolean) => AdoptElBySelector(selector, watch, config);\n        return CreateEl(prop as string, config);\n      },\n    },\n  ) as HtmlReturnType<P>;\n}\n", "import { HTML } from \"@linttrap/oem\";\n\nconst html = HTML({\n  style: (el: HTMLElement, prop: string, val: string, breakpoint: number, psuedo: string) => {\n    const apply = () => {\n      const isInBreakpoint = window.innerWidth > breakpoint;\n      console.log(prop, val, isInBreakpoint, window.innerWidth, breakpoint);\n      if (!isInBreakpoint) return;\n      el.style[prop as any] = val as any;\n    };\n    window.addEventListener(\"resize\", apply);\n    if (psuedo) el.addEventListener(psuedo, apply);\n    if (!psuedo) apply();\n  },\n});\n\n// register component\nfunction register(element: HTMLElement) {\n  const styleTraits = element\n    .getAttributeNames()\n    .filter((attr) => attr.startsWith(\"dx-style:\"))\n    .map((attr) => {\n      const values = element.getAttribute(attr)?.split(\" \");\n      return values?.map((v) => {\n        const [, prop] = attr.split(\":\");\n        const [bpVal, bp] = v.split(\"@\");\n        const [val, psuedo] = bpVal.split(\":\");\n        const _prop = prop.replace(/-([a-z])/g, (_, letter) => letter.toUpperCase());\n        console.log([\"style\", _prop, val, Number(bp ?? \"0\"), psuedo]);\n        return [\"style\", _prop, val, Number(bp ?? \"0\"), psuedo];\n      });\n    })\n    .flat();\n  html.el(element)(...(styleTraits as any));\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const buttons = document.querySelectorAll(`[dx-style]`) as NodeListOf<HTMLElement>;\n  buttons.forEach(register);\n  new MutationObserver((mutations) => {\n    mutations.forEach((mutation) => {\n      if (mutation.addedNodes.length > 0 && mutation.type === \"childList\") {\n        mutation.addedNodes.forEach((node) => {\n          if (node instanceof Element && node.getAttribute(\"dx\")) register(node as HTMLElement);\n        });\n      }\n    });\n  }).observe(this, { attributes: false, childList: true, subtree: true });\n});\n"],
  "mappings": "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",
  "names": []
}
