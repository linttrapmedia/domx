"use strict";(()=>{var yr=Object.create;var ee=Object.defineProperty;var xr=Object.getOwnPropertyDescriptor;var kr=Object.getOwnPropertyNames;var Nr=Object.getPrototypeOf,Or=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ir=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of kr(t))!Or.call(e,i)&&i!==r&&ee(e,i,{get:()=>t[i],enumerable:!(n=xr(t,i))||n.enumerable});return e};var qr=(e,t,r)=>(r=e!=null?yr(Nr(e)):{},Ir(t||!e||!e.__esModule?ee(r,"default",{value:e,enumerable:!0}):r,e));var P=p((Ys,ie)=>{"use strict";var Pr="\0",y="\0",te="",T=class{#e=!0;#r=!1;#t=!1;#h;#s=()=>{};#p=()=>{};#n={};#o={};#f={};#a={};#c={};#l={};#d={};#m=0;#w=0;#u;#i;constructor(t){t&&(this.#e=t.hasOwnProperty("directed")?t.directed:!0,this.#r=t.hasOwnProperty("multigraph")?t.multigraph:!1,this.#t=t.hasOwnProperty("compound")?t.compound:!1),this.#t&&(this.#u={},this.#i={},this.#i[y]={})}isDirected(){return this.#e}isMultigraph(){return this.#r}isCompound(){return this.#t}setGraph(t){return this.#h=t,this}graph(){return this.#h}setDefaultNodeLabel(t){return this.#s=t,typeof t!="function"&&(this.#s=()=>t),this}nodeCount(){return this.#m}nodes(){return Object.keys(this.#n)}sources(){var t=this;return this.nodes().filter(r=>Object.keys(t.#o[r]).length===0)}sinks(){var t=this;return this.nodes().filter(r=>Object.keys(t.#a[r]).length===0)}setNodes(t,r){var n=arguments,i=this;return t.forEach(function(s){n.length>1?i.setNode(s,r):i.setNode(s)}),this}setNode(t,r){return this.#n.hasOwnProperty(t)?(arguments.length>1&&(this.#n[t]=r),this):(this.#n[t]=arguments.length>1?r:this.#s(t),this.#t&&(this.#u[t]=y,this.#i[t]={},this.#i[y][t]=!0),this.#o[t]={},this.#f[t]={},this.#a[t]={},this.#c[t]={},++this.#m,this)}node(t){return this.#n[t]}hasNode(t){return this.#n.hasOwnProperty(t)}removeNode(t){var r=this;if(this.#n.hasOwnProperty(t)){var n=i=>r.removeEdge(r.#l[i]);delete this.#n[t],this.#t&&(this.#b(t),delete this.#u[t],this.children(t).forEach(function(i){r.setParent(i)}),delete this.#i[t]),Object.keys(this.#o[t]).forEach(n),delete this.#o[t],delete this.#f[t],Object.keys(this.#a[t]).forEach(n),delete this.#a[t],delete this.#c[t],--this.#m}return this}setParent(t,r){if(!this.#t)throw new Error("Cannot set parent in a non-compound graph");if(r===void 0)r=y;else{r+="";for(var n=r;n!==void 0;n=this.parent(n))if(n===t)throw new Error("Setting "+r+" as parent of "+t+" would create a cycle");this.setNode(r)}return this.setNode(t),this.#b(t),this.#u[t]=r,this.#i[r][t]=!0,this}#b(t){delete this.#i[this.#u[t]][t]}parent(t){if(this.#t){var r=this.#u[t];if(r!==y)return r}}children(t=y){if(this.#t){var r=this.#i[t];if(r)return Object.keys(r)}else{if(t===y)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var r=this.#f[t];if(r)return Object.keys(r)}successors(t){var r=this.#c[t];if(r)return Object.keys(r)}neighbors(t){var r=this.predecessors(t);if(r){let i=new Set(r);for(var n of this.successors(t))i.add(n);return Array.from(i.values())}}isLeaf(t){var r;return this.isDirected()?r=this.successors(t):r=this.neighbors(t),r.length===0}filterNodes(t){var r=new this.constructor({directed:this.#e,multigraph:this.#r,compound:this.#t});r.setGraph(this.graph());var n=this;Object.entries(this.#n).forEach(function([o,a]){t(o)&&r.setNode(o,a)}),Object.values(this.#l).forEach(function(o){r.hasNode(o.v)&&r.hasNode(o.w)&&r.setEdge(o,n.edge(o))});var i={};function s(o){var a=n.parent(o);return a===void 0||r.hasNode(a)?(i[o]=a,a):a in i?i[a]:s(a)}return this.#t&&r.nodes().forEach(o=>r.setParent(o,s(o))),r}setDefaultEdgeLabel(t){return this.#p=t,typeof t!="function"&&(this.#p=()=>t),this}edgeCount(){return this.#w}edges(){return Object.values(this.#l)}setPath(t,r){var n=this,i=arguments;return t.reduce(function(s,o){return i.length>1?n.setEdge(s,o,r):n.setEdge(s,o),o}),this}setEdge(){var t,r,n,i,s=!1,o=arguments[0];typeof o=="object"&&o!==null&&"v"in o?(t=o.v,r=o.w,n=o.name,arguments.length===2&&(i=arguments[1],s=!0)):(t=o,r=arguments[1],n=arguments[3],arguments.length>2&&(i=arguments[2],s=!0)),t=""+t,r=""+r,n!==void 0&&(n=""+n);var a=N(this.#e,t,r,n);if(this.#d.hasOwnProperty(a))return s&&(this.#d[a]=i),this;if(n!==void 0&&!this.#r)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(r),this.#d[a]=s?i:this.#p(t,r,n);var l=Lr(this.#e,t,r,n);return t=l.v,r=l.w,Object.freeze(l),this.#l[a]=l,re(this.#f[r],t),re(this.#c[t],r),this.#o[r][a]=l,this.#a[t][a]=l,this.#w++,this}edge(t,r,n){var i=arguments.length===1?M(this.#e,arguments[0]):N(this.#e,t,r,n);return this.#d[i]}edgeAsObj(){let t=this.edge(...arguments);return typeof t!="object"?{label:t}:t}hasEdge(t,r,n){var i=arguments.length===1?M(this.#e,arguments[0]):N(this.#e,t,r,n);return this.#d.hasOwnProperty(i)}removeEdge(t,r,n){var i=arguments.length===1?M(this.#e,arguments[0]):N(this.#e,t,r,n),s=this.#l[i];return s&&(t=s.v,r=s.w,delete this.#d[i],delete this.#l[i],ne(this.#f[r],t),ne(this.#c[t],r),delete this.#o[r][i],delete this.#a[t][i],this.#w--),this}inEdges(t,r){var n=this.#o[t];if(n){var i=Object.values(n);return r?i.filter(s=>s.v===r):i}}outEdges(t,r){var n=this.#a[t];if(n){var i=Object.values(n);return r?i.filter(s=>s.w===r):i}}nodeEdges(t,r){var n=this.inEdges(t,r);if(n)return n.concat(this.outEdges(t,r))}};function re(e,t){e[t]?e[t]++:e[t]=1}function ne(e,t){--e[t]||delete e[t]}function N(e,t,r,n){var i=""+t,s=""+r;if(!e&&i>s){var o=i;i=s,s=o}return i+te+s+te+(n===void 0?Pr:n)}function Lr(e,t,r,n){var i=""+t,s=""+r;if(!e&&i>s){var o=i;i=s,s=o}var a={v:i,w:s};return n&&(a.name=n),a}function M(e,t){return N(e,t.v,t.w,t.name)}ie.exports=T});var oe=p(($s,se)=>{se.exports="2.1.13"});var le=p((Bs,ae)=>{ae.exports={Graph:P(),version:oe()}});var ue=p((Ws,de)=>{var Cr=P();de.exports={write:Sr,read:jr};function Sr(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Mr(e),edges:Tr(e)};return e.graph()!==void 0&&(t.value=structuredClone(e.graph())),t}function Mr(e){return e.nodes().map(function(t){var r=e.node(t),n=e.parent(t),i={v:t};return r!==void 0&&(i.value=r),n!==void 0&&(i.parent=n),i})}function Tr(e){return e.edges().map(function(t){var r=e.edge(t),n={v:t.v,w:t.w};return t.name!==void 0&&(n.name=t.name),r!==void 0&&(n.value=r),n})}function jr(e){var t=new Cr(e.options).setGraph(e.value);return e.nodes.forEach(function(r){t.setNode(r.v,r.value),r.parent&&t.setParent(r.v,r.parent)}),e.edges.forEach(function(r){t.setEdge({v:r.v,w:r.w,name:r.name},r.value)}),t}});var fe=p((zs,he)=>{he.exports=_r;function _r(e){var t={},r=[],n;function i(s){t.hasOwnProperty(s)||(t[s]=!0,n.push(s),e.successors(s).forEach(i),e.predecessors(s).forEach(i))}return e.nodes().forEach(function(s){n=[],i(s),n.length&&r.push(n)}),r}});var _=p((Us,ce)=>{var j=class{#e=[];#r={};size(){return this.#e.length}keys(){return this.#e.map(function(t){return t.key})}has(t){return this.#r.hasOwnProperty(t)}priority(t){var r=this.#r[t];if(r!==void 0)return this.#e[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this.#e[0].key}add(t,r){var n=this.#r;if(t=String(t),!n.hasOwnProperty(t)){var i=this.#e,s=i.length;return n[t]=s,i.push({key:t,priority:r}),this.#h(s),!0}return!1}removeMin(){this.#s(0,this.#e.length-1);var t=this.#e.pop();return delete this.#r[t.key],this.#t(0),t.key}decrease(t,r){var n=this.#r[t];if(r>this.#e[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this.#e[n].priority+" New: "+r);this.#e[n].priority=r,this.#h(n)}#t(t){var r=this.#e,n=2*t,i=n+1,s=t;n<r.length&&(s=r[n].priority<r[s].priority?n:s,i<r.length&&(s=r[i].priority<r[s].priority?i:s),s!==t&&(this.#s(t,s),this.#t(s)))}#h(t){for(var r=this.#e,n=r[t].priority,i;t!==0&&(i=t>>1,!(r[i].priority<n));)this.#s(t,i),t=i}#s(t,r){var n=this.#e,i=this.#r,s=n[t],o=n[r];n[t]=o,n[r]=s,i[o.key]=t,i[s.key]=r}};ce.exports=j});var R=p((Hs,pe)=>{var Rr=_();pe.exports=Vr;var Gr=()=>1;function Vr(e,t,r,n){return Ar(e,String(t),r||Gr,n||function(i){return e.outEdges(i)})}function Ar(e,t,r,n){var i={},s=new Rr,o,a,l=function(d){var u=d.v!==o?d.v:d.w,h=i[u],f=r(d),c=a.distance+f;if(f<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+d+" Weight: "+f);c<h.distance&&(h.distance=c,h.predecessor=o,s.decrease(u,c))};for(e.nodes().forEach(function(d){var u=d===t?0:Number.POSITIVE_INFINITY;i[d]={distance:u},s.add(d,u)});s.size()>0&&(o=s.removeMin(),a=i[o],a.distance!==Number.POSITIVE_INFINITY);)n(o).forEach(l);return i}});var we=p((Xs,me)=>{var Fr=R();me.exports=Dr;function Dr(e,t,r){return e.nodes().reduce(function(n,i){return n[i]=Fr(e,i,t,r),n},{})}});var G=p((Ks,be)=>{be.exports=Yr;function Yr(e){var t=0,r=[],n={},i=[];function s(o){var a=n[o]={onStack:!0,lowlink:t,index:t++};if(r.push(o),e.successors(o).forEach(function(u){n.hasOwnProperty(u)?n[u].onStack&&(a.lowlink=Math.min(a.lowlink,n[u].index)):(s(u),a.lowlink=Math.min(a.lowlink,n[u].lowlink))}),a.lowlink===a.index){var l=[],d;do d=r.pop(),n[d].onStack=!1,l.push(d);while(o!==d);i.push(l)}}return e.nodes().forEach(function(o){n.hasOwnProperty(o)||s(o)}),i}});var Ee=p((Js,ge)=>{var $r=G();ge.exports=Br;function Br(e){return $r(e).filter(function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})}});var ye=p((Qs,ve)=>{ve.exports=zr;var Wr=()=>1;function zr(e,t,r){return Ur(e,t||Wr,r||function(n){return e.outEdges(n)})}function Ur(e,t,r){var n={},i=e.nodes();return i.forEach(function(s){n[s]={},n[s][s]={distance:0},i.forEach(function(o){s!==o&&(n[s][o]={distance:Number.POSITIVE_INFINITY})}),r(s).forEach(function(o){var a=o.v===s?o.w:o.v,l=t(o);n[s][a]={distance:l,predecessor:s}})}),i.forEach(function(s){var o=n[s];i.forEach(function(a){var l=n[a];i.forEach(function(d){var u=l[s],h=o[d],f=l[d],c=u.distance+h.distance;c<f.distance&&(f.distance=c,f.predecessor=h.predecessor)})})}),n}});var V=p((Zs,ke)=>{function xe(e){var t={},r={},n=[];function i(s){if(r.hasOwnProperty(s))throw new O;t.hasOwnProperty(s)||(r[s]=!0,t[s]=!0,e.predecessors(s).forEach(i),delete r[s],n.push(s))}if(e.sinks().forEach(i),Object.keys(t).length!==e.nodeCount())throw new O;return n}var O=class extends Error{constructor(){super(...arguments)}};ke.exports=xe;xe.CycleException=O});var Ie=p((eo,Oe)=>{var Ne=V();Oe.exports=Hr;function Hr(e){try{Ne(e)}catch(t){if(t instanceof Ne.CycleException)return!1;throw t}return!0}});var A=p((to,Pe)=>{Pe.exports=Xr;function Xr(e,t,r){Array.isArray(t)||(t=[t]);var n=e.isDirected()?a=>e.successors(a):a=>e.neighbors(a),i=r==="post"?Kr:Jr,s=[],o={};return t.forEach(a=>{if(!e.hasNode(a))throw new Error("Graph does not have node: "+a);i(a,n,o,s)}),s}function Kr(e,t,r,n){for(var i=[[e,!1]];i.length>0;){var s=i.pop();s[1]?n.push(s[0]):r.hasOwnProperty(s[0])||(r[s[0]]=!0,i.push([s[0],!0]),qe(t(s[0]),o=>i.push([o,!1])))}}function Jr(e,t,r,n){for(var i=[e];i.length>0;){var s=i.pop();r.hasOwnProperty(s)||(r[s]=!0,n.push(s),qe(t(s),o=>i.push(o)))}}function qe(e,t){for(var r=e.length;r--;)t(e[r],r,e);return e}});var Ce=p((ro,Le)=>{var Qr=A();Le.exports=Zr;function Zr(e,t){return Qr(e,t,"post")}});var Me=p((no,Se)=>{var en=A();Se.exports=tn;function tn(e,t){return en(e,t,"pre")}});var je=p((io,Te)=>{var rn=P(),nn=_();Te.exports=sn;function sn(e,t){var r=new rn,n={},i=new nn,s;function o(l){var d=l.v===s?l.w:l.v,u=i.priority(d);if(u!==void 0){var h=t(l);h<u&&(n[d]=s,i.decrease(d,h))}}if(e.nodeCount()===0)return r;e.nodes().forEach(function(l){i.add(l,Number.POSITIVE_INFINITY),r.setNode(l)}),i.decrease(e.nodes()[0],0);for(var a=!1;i.size()>0;){if(s=i.removeMin(),n.hasOwnProperty(s))r.setEdge(s,n[s]);else{if(a)throw new Error("Input graph is not connected: "+e);a=!0}e.nodeEdges(s).forEach(o)}return r}});var Re=p((so,_e)=>{_e.exports={components:fe(),dijkstra:R(),dijkstraAll:we(),findCycles:Ee(),floydWarshall:ye(),isAcyclic:Ie(),postorder:Ce(),preorder:Me(),prim:je(),tarjan:G(),topsort:V()}});var g=p((oo,Ve)=>{var Ge=le();Ve.exports={Graph:Ge.Graph,json:ue(),alg:Re(),version:Ge.version}});var De=p((ao,Fe)=>{var F=class{constructor(){let t={};t._next=t._prev=t,this._sentinel=t}dequeue(){let t=this._sentinel,r=t._prev;if(r!==t)return Ae(r),r}enqueue(t){let r=this._sentinel;t._prev&&t._next&&Ae(t),t._next=r._next,r._next._prev=t,r._next=t,t._prev=r}toString(){let t=[],r=this._sentinel,n=r._prev;for(;n!==r;)t.push(JSON.stringify(n,on)),n=n._prev;return"["+t.join(", ")+"]"}};function Ae(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function on(e,t){if(e!=="_next"&&e!=="_prev")return t}Fe.exports=F});var $e=p((lo,Ye)=>{var an=g().Graph,ln=De();Ye.exports=un;var dn=()=>1;function un(e,t){if(e.nodeCount()<=1)return[];let r=fn(e,t||dn);return hn(r.graph,r.buckets,r.zeroIdx).flatMap(i=>e.outEdges(i.v,i.w))}function hn(e,t,r){let n=[],i=t[t.length-1],s=t[0],o;for(;e.nodeCount();){for(;o=s.dequeue();)D(e,t,r,o);for(;o=i.dequeue();)D(e,t,r,o);if(e.nodeCount()){for(let a=t.length-2;a>0;--a)if(o=t[a].dequeue(),o){n=n.concat(D(e,t,r,o,!0));break}}}return n}function D(e,t,r,n,i){let s=i?[]:void 0;return e.inEdges(n.v).forEach(o=>{let a=e.edge(o),l=e.node(o.v);i&&s.push({v:o.v,w:o.w}),l.out-=a,Y(t,r,l)}),e.outEdges(n.v).forEach(o=>{let a=e.edge(o),l=o.w,d=e.node(l);d.in-=a,Y(t,r,d)}),e.removeNode(n.v),s}function fn(e,t){let r=new an,n=0,i=0;e.nodes().forEach(a=>{r.setNode(a,{v:a,in:0,out:0})}),e.edges().forEach(a=>{let l=r.edge(a.v,a.w)||0,d=t(a),u=l+d;r.setEdge(a.v,a.w,u),i=Math.max(i,r.node(a.v).out+=d),n=Math.max(n,r.node(a.w).in+=d)});let s=cn(i+n+3).map(()=>new ln),o=n+1;return r.nodes().forEach(a=>{Y(s,o,r.node(a))}),{graph:r,buckets:s,zeroIdx:o}}function Y(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}function cn(e){let t=[];for(let r=0;r<e;r++)t.push(r);return t}});var w=p((uo,Xe)=>{"use strict";var Be=g().Graph;Xe.exports={addBorderNode:xn,addDummyNode:We,asNonCompoundGraph:mn,buildLayerMatrix:En,intersectRect:gn,mapValues:Pn,maxRank:ze,normalizeRanks:vn,notime:On,partition:kn,pick:qn,predecessorWeights:bn,range:He,removeEmptyRanks:yn,simplify:pn,successorWeights:wn,time:Nn,uniqueId:Ue,zipObject:$};function We(e,t,r,n){let i;do i=Ue(n);while(e.hasNode(i));return r.dummy=t,e.setNode(i,r),i}function pn(e){let t=new Be().setGraph(e.graph());return e.nodes().forEach(r=>t.setNode(r,e.node(r))),e.edges().forEach(r=>{let n=t.edge(r.v,r.w)||{weight:0,minlen:1},i=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t}function mn(e){let t=new Be({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(r=>{e.children(r).length||t.setNode(r,e.node(r))}),e.edges().forEach(r=>{t.setEdge(r,e.edge(r))}),t}function wn(e){let t=e.nodes().map(r=>{let n={};return e.outEdges(r).forEach(i=>{n[i.w]=(n[i.w]||0)+e.edge(i).weight}),n});return $(e.nodes(),t)}function bn(e){let t=e.nodes().map(r=>{let n={};return e.inEdges(r).forEach(i=>{n[i.v]=(n[i.v]||0)+e.edge(i).weight}),n});return $(e.nodes(),t)}function gn(e,t){let r=e.x,n=e.y,i=t.x-r,s=t.y-n,o=e.width/2,a=e.height/2;if(!i&&!s)throw new Error("Not possible to find intersection inside of the rectangle");let l,d;return Math.abs(s)*o>Math.abs(i)*a?(s<0&&(a=-a),l=a*i/s,d=a):(i<0&&(o=-o),l=o,d=o*s/i),{x:r+l,y:n+d}}function En(e){let t=He(ze(e)+1).map(()=>[]);return e.nodes().forEach(r=>{let n=e.node(r),i=n.rank;i!==void 0&&(t[i][n.order]=r)}),t}function vn(e){let t=Math.min(...e.nodes().map(r=>{let n=e.node(r).rank;return n===void 0?Number.MAX_VALUE:n}));e.nodes().forEach(r=>{let n=e.node(r);n.hasOwnProperty("rank")&&(n.rank-=t)})}function yn(e){let t=Math.min(...e.nodes().map(s=>e.node(s).rank)),r=[];e.nodes().forEach(s=>{let o=e.node(s).rank-t;r[o]||(r[o]=[]),r[o].push(s)});let n=0,i=e.graph().nodeRankFactor;Array.from(r).forEach((s,o)=>{s===void 0&&o%i!==0?--n:s!==void 0&&n&&s.forEach(a=>e.node(a).rank+=n)})}function xn(e,t,r,n){let i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),We(e,"border",i,t)}function ze(e){return Math.max(...e.nodes().map(t=>{let r=e.node(t).rank;return r===void 0?Number.MIN_VALUE:r}))}function kn(e,t){let r={lhs:[],rhs:[]};return e.forEach(n=>{t(n)?r.lhs.push(n):r.rhs.push(n)}),r}function Nn(e,t){let r=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-r)+"ms")}}function On(e,t){return t()}var In=0;function Ue(e){var t=++In;return toString(e)+t}function He(e,t,r=1){t==null&&(t=e,e=0);let n=s=>s<t;r<0&&(n=s=>t<s);let i=[];for(let s=e;n(s);s+=r)i.push(s);return i}function qn(e,t){let r={};for(let n of t)e[n]!==void 0&&(r[n]=e[n]);return r}function Pn(e,t){let r=t;return typeof t=="string"&&(r=n=>n[t]),Object.entries(e).reduce((n,[i,s])=>(n[i]=r(s,i),n),{})}function $(e,t){return e.reduce((r,n,i)=>(r[n]=t[i],r),{})}});var Je=p((ho,Ke)=>{"use strict";var Ln=$e(),Cn=w().uniqueId;Ke.exports={run:Sn,undo:Tn};function Sn(e){(e.graph().acyclicer==="greedy"?Ln(e,r(e)):Mn(e)).forEach(n=>{let i=e.edge(n);e.removeEdge(n),i.forwardName=n.name,i.reversed=!0,e.setEdge(n.w,n.v,i,Cn("rev"))});function r(n){return i=>n.edge(i).weight}}function Mn(e){let t=[],r={},n={};function i(s){n.hasOwnProperty(s)||(n[s]=!0,r[s]=!0,e.outEdges(s).forEach(o=>{r.hasOwnProperty(o.w)?t.push(o):i(o.w)}),delete r[s])}return e.nodes().forEach(i),t}function Tn(e){e.edges().forEach(t=>{let r=e.edge(t);if(r.reversed){e.removeEdge(t);let n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}});var Ze=p((fo,Qe)=>{"use strict";var jn=w();Qe.exports={run:_n,undo:Gn};function _n(e){e.graph().dummyChains=[],e.edges().forEach(t=>Rn(e,t))}function Rn(e,t){let r=t.v,n=e.node(r).rank,i=t.w,s=e.node(i).rank,o=t.name,a=e.edge(t),l=a.labelRank;if(s===n+1)return;e.removeEdge(t);let d,u,h;for(h=0,++n;n<s;++h,++n)a.points=[],u={width:0,height:0,edgeLabel:a,edgeObj:t,rank:n},d=jn.addDummyNode(e,"edge",u,"_d"),n===l&&(u.width=a.width,u.height=a.height,u.dummy="edge-label",u.labelpos=a.labelpos),e.setEdge(r,d,{weight:a.weight},o),h===0&&e.graph().dummyChains.push(d),r=d;e.setEdge(r,i,{weight:a.weight},o)}function Gn(e){e.graph().dummyChains.forEach(t=>{let r=e.node(t),n=r.edgeLabel,i;for(e.setEdge(r.edgeObj,n);r.dummy;)i=e.successors(t)[0],e.removeNode(t),n.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(n.x=r.x,n.y=r.y,n.width=r.width,n.height=r.height),t=i,r=e.node(t)})}});var I=p((co,et)=>{"use strict";et.exports={longestPath:Vn,slack:An};function Vn(e){var t={};function r(n){var i=e.node(n);if(t.hasOwnProperty(n))return i.rank;t[n]=!0;var s=Math.min(...e.outEdges(n).map(o=>o==null?Number.POSITIVE_INFINITY:r(o.w)-e.edge(o).minlen));return s===Number.POSITIVE_INFINITY&&(s=0),i.rank=s}e.sources().forEach(r)}function An(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}});var B=p((po,tt)=>{"use strict";var Fn=g().Graph,L=I().slack;tt.exports=Dn;function Dn(e){var t=new Fn({directed:!1}),r=e.nodes()[0],n=e.nodeCount();t.setNode(r,{});for(var i,s;Yn(t,e)<n;)i=$n(t,e),s=t.hasNode(i.v)?L(e,i):-L(e,i),Bn(t,e,s);return t}function Yn(e,t){function r(n){t.nodeEdges(n).forEach(i=>{var s=i.v,o=n===s?i.w:s;!e.hasNode(o)&&!L(t,i)&&(e.setNode(o,{}),e.setEdge(n,o,{}),r(o))})}return e.nodes().forEach(r),e.nodeCount()}function $n(e,t){return t.edges().reduce((n,i)=>{let s=Number.POSITIVE_INFINITY;return e.hasNode(i.v)!==e.hasNode(i.w)&&(s=L(t,i)),s<n[0]?[s,i]:n},[Number.POSITIVE_INFINITY,null])[1]}function Bn(e,t,r){e.nodes().forEach(n=>t.node(n).rank+=r)}});var ut=p((mo,dt)=>{"use strict";var Wn=B(),rt=I().slack,zn=I().longestPath,Un=g().alg.preorder,Hn=g().alg.postorder,Xn=w().simplify;dt.exports=x;x.initLowLimValues=z;x.initCutValues=W;x.calcCutValue=it;x.leaveEdge=ot;x.enterEdge=at;x.exchangeEdges=lt;function x(e){e=Xn(e),zn(e);var t=Wn(e);z(t),W(t,e);for(var r,n;r=ot(t);)n=at(t,e,r),lt(t,e,r,n)}function W(e,t){var r=Hn(e,e.nodes());r=r.slice(0,r.length-1),r.forEach(n=>Kn(e,t,n))}function Kn(e,t,r){var n=e.node(r),i=n.parent;e.edge(r,i).cutvalue=it(e,t,r)}function it(e,t,r){var n=e.node(r),i=n.parent,s=!0,o=t.edge(r,i),a=0;return o||(s=!1,o=t.edge(i,r)),a=o.weight,t.nodeEdges(r).forEach(l=>{var d=l.v===r,u=d?l.w:l.v;if(u!==i){var h=d===s,f=t.edge(l).weight;if(a+=h?f:-f,Qn(e,r,u)){var c=e.edge(r,u).cutvalue;a+=h?-c:c}}}),a}function z(e,t){arguments.length<2&&(t=e.nodes()[0]),st(e,{},1,t)}function st(e,t,r,n,i){var s=r,o=e.node(n);return t[n]=!0,e.neighbors(n).forEach(a=>{t.hasOwnProperty(a)||(r=st(e,t,r,a,n))}),o.low=s,o.lim=r++,i?o.parent=i:delete o.parent,r}function ot(e){return e.edges().find(t=>e.edge(t).cutvalue<0)}function at(e,t,r){var n=r.v,i=r.w;t.hasEdge(n,i)||(n=r.w,i=r.v);var s=e.node(n),o=e.node(i),a=s,l=!1;s.lim>o.lim&&(a=o,l=!0);var d=t.edges().filter(u=>l===nt(e,e.node(u.v),a)&&l!==nt(e,e.node(u.w),a));return d.reduce((u,h)=>rt(t,h)<rt(t,u)?h:u)}function lt(e,t,r,n){var i=r.v,s=r.w;e.removeEdge(i,s),e.setEdge(n.v,n.w,{}),z(e),W(e,t),Jn(e,t)}function Jn(e,t){var r=e.nodes().find(i=>!t.node(i).parent),n=Un(e,r);n=n.slice(1),n.forEach(i=>{var s=e.node(i).parent,o=t.edge(i,s),a=!1;o||(o=t.edge(s,i),a=!0),t.node(i).rank=t.node(s).rank+(a?o.minlen:-o.minlen)})}function Qn(e,t,r){return e.hasEdge(t,r)}function nt(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}});var pt=p((wo,ct)=>{"use strict";var Zn=I(),ft=Zn.longestPath,ei=B(),ti=ut();ct.exports=ri;function ri(e){switch(e.graph().ranker){case"network-simplex":ht(e);break;case"tight-tree":ii(e);break;case"longest-path":ni(e);break;default:ht(e)}}var ni=ft;function ii(e){ft(e),ei(e)}function ht(e){ti(e)}});var wt=p((bo,mt)=>{mt.exports=si;function si(e){let t=ai(e);e.graph().dummyChains.forEach(r=>{let n=e.node(r),i=n.edgeObj,s=oi(e,t,i.v,i.w),o=s.path,a=s.lca,l=0,d=o[l],u=!0;for(;r!==i.w;){if(n=e.node(r),u){for(;(d=o[l])!==a&&e.node(d).maxRank<n.rank;)l++;d===a&&(u=!1)}if(!u){for(;l<o.length-1&&e.node(d=o[l+1]).minRank<=n.rank;)l++;d=o[l]}e.setParent(r,d),r=e.successors(r)[0]}})}function oi(e,t,r,n){let i=[],s=[],o=Math.min(t[r].low,t[n].low),a=Math.max(t[r].lim,t[n].lim),l,d;l=r;do l=e.parent(l),i.push(l);while(l&&(t[l].low>o||a>t[l].lim));for(d=l,l=n;(l=e.parent(l))!==d;)s.push(l);return{path:i.concat(s.reverse()),lca:d}}function ai(e){let t={},r=0;function n(i){let s=r;e.children(i).forEach(n),t[i]={low:s,lim:r++}}return e.children().forEach(n),t}});var Et=p((go,gt)=>{var U=w();gt.exports={run:li,cleanup:hi};function li(e){let t=U.addDummyNode(e,"root",{},"_root"),r=di(e),n=Math.max(...Object.values(r))-1,i=2*n+1;e.graph().nestingRoot=t,e.edges().forEach(o=>e.edge(o).minlen*=i);let s=ui(e)+1;e.children().forEach(o=>bt(e,t,i,s,n,r,o)),e.graph().nodeRankFactor=i}function bt(e,t,r,n,i,s,o){let a=e.children(o);if(!a.length){o!==t&&e.setEdge(t,o,{weight:0,minlen:r});return}let l=U.addBorderNode(e,"_bt"),d=U.addBorderNode(e,"_bb"),u=e.node(o);e.setParent(l,o),u.borderTop=l,e.setParent(d,o),u.borderBottom=d,a.forEach(h=>{bt(e,t,r,n,i,s,h);let f=e.node(h),c=f.borderTop?f.borderTop:h,m=f.borderBottom?f.borderBottom:h,b=f.borderTop?n:2*n,v=c!==m?1:i-s[o]+1;e.setEdge(l,c,{weight:b,minlen:v,nestingEdge:!0}),e.setEdge(m,d,{weight:b,minlen:v,nestingEdge:!0})}),e.parent(o)||e.setEdge(t,l,{weight:0,minlen:i+s[o]})}function di(e){var t={};function r(n,i){var s=e.children(n);s&&s.length&&s.forEach(o=>r(o,i+1)),t[n]=i}return e.children().forEach(n=>r(n,1)),t}function ui(e){return e.edges().reduce((t,r)=>t+e.edge(r).weight,0)}function hi(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(r=>{var n=e.edge(r);n.nestingEdge&&e.removeEdge(r)})}});var xt=p((Eo,yt)=>{var fi=w();yt.exports=ci;function ci(e){function t(r){let n=e.children(r),i=e.node(r);if(n.length&&n.forEach(t),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(let s=i.minRank,o=i.maxRank+1;s<o;++s)vt(e,"borderLeft","_bl",r,i,s),vt(e,"borderRight","_br",r,i,s)}}e.children().forEach(t)}function vt(e,t,r,n,i,s){let o={width:0,height:0,rank:s,borderType:t},a=i[t][s-1],l=fi.addDummyNode(e,"border",o,r);i[t][s]=l,e.setParent(l,n),a&&e.setEdge(a,l,{weight:1})}});var It=p((vo,Ot)=>{"use strict";Ot.exports={adjust:pi,undo:mi};function pi(e){let t=e.graph().rankdir.toLowerCase();(t==="lr"||t==="rl")&&Nt(e)}function mi(e){let t=e.graph().rankdir.toLowerCase();(t==="bt"||t==="rl")&&wi(e),(t==="lr"||t==="rl")&&(bi(e),Nt(e))}function Nt(e){e.nodes().forEach(t=>kt(e.node(t))),e.edges().forEach(t=>kt(e.edge(t)))}function kt(e){let t=e.width;e.width=e.height,e.height=t}function wi(e){e.nodes().forEach(t=>H(e.node(t))),e.edges().forEach(t=>{let r=e.edge(t);r.points.forEach(H),r.hasOwnProperty("y")&&H(r)})}function H(e){e.y=-e.y}function bi(e){e.nodes().forEach(t=>X(e.node(t))),e.edges().forEach(t=>{let r=e.edge(t);r.points.forEach(X),r.hasOwnProperty("x")&&X(r)})}function X(e){let t=e.x;e.x=e.y,e.y=t}});var Pt=p((yo,qt)=>{"use strict";var gi=w();qt.exports=Ei;function Ei(e){let t={},r=e.nodes().filter(a=>!e.children(a).length),n=Math.max(...r.map(a=>e.node(a).rank)),i=gi.range(n+1).map(()=>[]);function s(a){if(t[a])return;t[a]=!0;let l=e.node(a);i[l.rank].push(a),e.successors(a).forEach(s)}return r.sort((a,l)=>e.node(a).rank-e.node(l).rank).forEach(s),i}});var Ct=p((xo,Lt)=>{"use strict";var vi=w().zipObject;Lt.exports=yi;function yi(e,t){let r=0;for(let n=1;n<t.length;++n)r+=xi(e,t[n-1],t[n]);return r}function xi(e,t,r){let n=vi(r,r.map((d,u)=>u)),i=t.flatMap(d=>e.outEdges(d).map(u=>({pos:n[u.w],weight:e.edge(u).weight})).sort((u,h)=>u.pos-h.pos)),s=1;for(;s<r.length;)s<<=1;let o=2*s-1;s-=1;let a=new Array(o).fill(0),l=0;return i.forEach(d=>{let u=d.pos+s;a[u]+=d.weight;let h=0;for(;u>0;)u%2&&(h+=a[u+1]),u=u-1>>1,a[u]+=d.weight;l+=d.weight*h}),l}});var Mt=p((ko,St)=>{St.exports=ki;function ki(e,t=[]){return t.map(r=>{let n=e.inEdges(r);if(n.length){let i=n.reduce((s,o)=>{let a=e.edge(o),l=e.node(o.v);return{sum:s.sum+a.weight*l.order,weight:s.weight+a.weight}},{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:r}})}});var jt=p((No,Tt)=>{"use strict";var Ni=w();Tt.exports=Oi;function Oi(e,t){let r={};e.forEach((i,s)=>{let o=r[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:s};i.barycenter!==void 0&&(o.barycenter=i.barycenter,o.weight=i.weight)}),t.edges().forEach(i=>{let s=r[i.v],o=r[i.w];s!==void 0&&o!==void 0&&(o.indegree++,s.out.push(r[i.w]))});let n=Object.values(r).filter(i=>!i.indegree);return Ii(n)}function Ii(e){let t=[];function r(i){return s=>{s.merged||(s.barycenter===void 0||i.barycenter===void 0||s.barycenter>=i.barycenter)&&qi(i,s)}}function n(i){return s=>{s.in.push(i),--s.indegree===0&&e.push(s)}}for(;e.length;){let i=e.pop();t.push(i),i.in.reverse().forEach(r(i)),i.out.forEach(n(i))}return t.filter(i=>!i.merged).map(i=>Ni.pick(i,["vs","i","barycenter","weight"]))}function qi(e,t){let r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}});var Gt=p((Oo,Rt)=>{var Pi=w();Rt.exports=Li;function Li(e,t){let r=Pi.partition(e,u=>u.hasOwnProperty("barycenter")),n=r.lhs,i=r.rhs.sort((u,h)=>h.i-u.i),s=[],o=0,a=0,l=0;n.sort(Ci(!!t)),l=_t(s,i,l),n.forEach(u=>{l+=u.vs.length,s.push(u.vs),o+=u.barycenter*u.weight,a+=u.weight,l=_t(s,i,l)});let d={vs:s.flat(!0)};return a&&(d.barycenter=o/a,d.weight=a),d}function _t(e,t,r){let n;for(;t.length&&(n=t[t.length-1]).i<=r;)t.pop(),e.push(n.vs),r++;return r}function Ci(e){return(t,r)=>t.barycenter<r.barycenter?-1:t.barycenter>r.barycenter?1:e?r.i-t.i:t.i-r.i}});var Ft=p((Io,At)=>{var Si=Mt(),Mi=jt(),Ti=Gt();At.exports=Vt;function Vt(e,t,r,n){let i=e.children(t),s=e.node(t),o=s?s.borderLeft:void 0,a=s?s.borderRight:void 0,l={};o&&(i=i.filter(f=>f!==o&&f!==a));let d=Si(e,i);d.forEach(f=>{if(e.children(f.v).length){let c=Vt(e,f.v,r,n);l[f.v]=c,c.hasOwnProperty("barycenter")&&_i(f,c)}});let u=Mi(d,r);ji(u,l);let h=Ti(u,n);if(o&&(h.vs=[o,h.vs,a].flat(!0),e.predecessors(o).length)){let f=e.node(e.predecessors(o)[0]),c=e.node(e.predecessors(a)[0]);h.hasOwnProperty("barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+f.order+c.order)/(h.weight+2),h.weight+=2}return h}function ji(e,t){e.forEach(r=>{r.vs=r.vs.flatMap(n=>t[n]?t[n].vs:n)})}function _i(e,t){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)}});var Yt=p((qo,Dt)=>{var Ri=g().Graph,Gi=w();Dt.exports=Vi;function Vi(e,t,r){let n=Ai(e),i=new Ri({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{let o=e.node(s),a=e.parent(s);(o.rank===t||o.minRank<=t&&t<=o.maxRank)&&(i.setNode(s),i.setParent(s,a||n),e[r](s).forEach(l=>{let d=l.v===s?l.w:l.v,u=i.edge(d,s),h=u!==void 0?u.weight:0;i.setEdge(d,s,{weight:e.edge(l).weight+h})}),o.hasOwnProperty("minRank")&&i.setNode(s,{borderLeft:o.borderLeft[t],borderRight:o.borderRight[t]}))}),i}function Ai(e){for(var t;e.hasNode(t=Gi.uniqueId("_root")););return t}});var Bt=p((Po,$t)=>{$t.exports=Fi;function Fi(e,t,r){let n={},i;r.forEach(s=>{let o=e.parent(s),a,l;for(;o;){if(a=e.parent(o),a?(l=n[a],n[a]=o):(l=i,i=o),l&&l!==o){t.setEdge(l,o);return}o=a}})}});var Ht=p((Lo,Ut)=>{"use strict";var Di=Pt(),Yi=Ct(),$i=Ft(),Bi=Yt(),Wi=Bt(),zi=g().Graph,C=w();Ut.exports=Ui;function Ui(e){let t=C.maxRank(e),r=Wt(e,C.range(1,t+1),"inEdges"),n=Wt(e,C.range(t-1,-1,-1),"outEdges"),i=Di(e);zt(e,i);let s=Number.POSITIVE_INFINITY,o;for(let a=0,l=0;l<4;++a,++l){Hi(a%2?r:n,a%4>=2),i=C.buildLayerMatrix(e);let d=Yi(e,i);d<s&&(l=0,o=Object.assign({},i),s=d)}zt(e,o)}function Wt(e,t,r){return t.map(function(n){return Bi(e,n,r)})}function Hi(e,t){let r=new zi;e.forEach(function(n){let i=n.graph().root,s=$i(n,i,r,t);s.vs.forEach((o,a)=>n.node(o).order=a),Wi(n,r,s.vs)})}function zt(e,t){Object.values(t).forEach(r=>r.forEach((n,i)=>e.node(n).order=i))}});var ir=p((Co,nr)=>{"use strict";var Xi=g().Graph,q=w();nr.exports={positionX:Qi,findType1Conflicts:Xt,findType2Conflicts:Kt,addConflict:K,hasConflict:Jt,verticalAlignment:Qt,horizontalCompaction:Zt,alignCoordinates:tr,findSmallestWidthAlignment:er,balance:rr};function Xt(e,t){let r={};function n(i,s){let o=0,a=0,l=i.length,d=s[s.length-1];return s.forEach((u,h)=>{let f=Ki(e,u),c=f?e.node(f).order:l;(f||u===d)&&(s.slice(a,h+1).forEach(m=>{e.predecessors(m).forEach(b=>{let v=e.node(b),k=v.order;(k<o||c<k)&&!(v.dummy&&e.node(m).dummy)&&K(r,b,m)})}),a=h+1,o=c)}),s}return t.reduce(n),r}function Kt(e,t){let r={};function n(s,o,a,l,d){let u;q.range(o,a).forEach(h=>{u=s[h],e.node(u).dummy&&e.predecessors(u).forEach(f=>{let c=e.node(f);c.dummy&&(c.order<l||c.order>d)&&K(r,f,u)})})}function i(s,o){let a=-1,l,d=0;return o.forEach((u,h)=>{if(e.node(u).dummy==="border"){let f=e.predecessors(u);f.length&&(l=e.node(f[0]).order,n(o,d,h,a,l),d=h,a=l)}n(o,d,o.length,l,s.length)}),o}return t.reduce(i),r}function Ki(e,t){if(e.node(t).dummy)return e.predecessors(t).find(r=>e.node(r).dummy)}function K(e,t,r){if(t>r){let i=t;t=r,r=i}let n=e[t];n||(e[t]=n={}),n[r]=!0}function Jt(e,t,r){if(t>r){let n=t;t=r,r=n}return!!e[t]&&e[t].hasOwnProperty(r)}function Qt(e,t,r,n){let i={},s={},o={};return t.forEach(a=>{a.forEach((l,d)=>{i[l]=l,s[l]=l,o[l]=d})}),t.forEach(a=>{let l=-1;a.forEach(d=>{let u=n(d);if(u.length){u=u.sort((f,c)=>o[f]-o[c]);let h=(u.length-1)/2;for(let f=Math.floor(h),c=Math.ceil(h);f<=c;++f){let m=u[f];s[d]===d&&l<o[m]&&!Jt(r,d,m)&&(s[m]=d,s[d]=i[d]=i[m],l=o[m])}}})}),{root:i,align:s}}function Zt(e,t,r,n,i){let s={},o=Ji(e,t,r,i),a=i?"borderLeft":"borderRight";function l(h,f){let c=o.nodes(),m=c.pop(),b={};for(;m;)b[m]?h(m):(b[m]=!0,c.push(m),c=c.concat(f(m))),m=c.pop()}function d(h){s[h]=o.inEdges(h).reduce((f,c)=>Math.max(f,s[c.v]+o.edge(c)),0)}function u(h){let f=o.outEdges(h).reduce((m,b)=>Math.min(m,s[b.w]-o.edge(b)),Number.POSITIVE_INFINITY),c=e.node(h);f!==Number.POSITIVE_INFINITY&&c.borderType!==a&&(s[h]=Math.max(s[h],f))}return l(d,o.predecessors.bind(o)),l(u,o.successors.bind(o)),Object.keys(n).forEach(h=>s[h]=s[r[h]]),s}function Ji(e,t,r,n){let i=new Xi,s=e.graph(),o=Zi(s.nodesep,s.edgesep,n);return t.forEach(a=>{let l;a.forEach(d=>{let u=r[d];if(i.setNode(u),l){var h=r[l],f=i.edge(h,u);i.setEdge(h,u,Math.max(o(e,d,l),f||0))}l=d})}),i}function er(e,t){return Object.values(t).reduce((r,n)=>{let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;Object.entries(n).forEach(([a,l])=>{let d=es(e,a)/2;i=Math.max(l+d,i),s=Math.min(l-d,s)});let o=i-s;return o<r[0]&&(r=[o,n]),r},[Number.POSITIVE_INFINITY,null])[1]}function tr(e,t){let r=Object.values(t),n=Math.min(...r),i=Math.max(...r);["u","d"].forEach(s=>{["l","r"].forEach(o=>{let a=s+o,l=e[a];if(l===t)return;let d=Object.values(l),u=n-Math.min(...d);o!=="l"&&(u=i-Math.max(...d)),u&&(e[a]=q.mapValues(l,h=>h+u))})})}function rr(e,t){return q.mapValues(e.ul,(r,n)=>{if(t)return e[t.toLowerCase()][n];{let i=Object.values(e).map(s=>s[n]).sort((s,o)=>s-o);return(i[1]+i[2])/2}})}function Qi(e){let t=q.buildLayerMatrix(e),r=Object.assign(Xt(e,t),Kt(e,t)),n={},i;["u","d"].forEach(o=>{i=o==="u"?t:Object.values(t).reverse(),["l","r"].forEach(a=>{a==="r"&&(i=i.map(h=>Object.values(h).reverse()));let l=(o==="u"?e.predecessors:e.successors).bind(e),d=Qt(e,i,r,l),u=Zt(e,i,d.root,d.align,a==="r");a==="r"&&(u=q.mapValues(u,h=>-h)),n[o+a]=u})});let s=er(e,n);return tr(n,s),rr(n,e.graph().align)}function Zi(e,t,r){return(n,i,s)=>{let o=n.node(i),a=n.node(s),l=0,d;if(l+=o.width/2,o.hasOwnProperty("labelpos"))switch(o.labelpos.toLowerCase()){case"l":d=-o.width/2;break;case"r":d=o.width/2;break}if(d&&(l+=r?d:-d),d=0,l+=(o.dummy?t:e)/2,l+=(a.dummy?t:e)/2,l+=a.width/2,a.hasOwnProperty("labelpos"))switch(a.labelpos.toLowerCase()){case"l":d=a.width/2;break;case"r":d=-a.width/2;break}return d&&(l+=r?d:-d),d=0,l}}function es(e,t){return e.node(t).width}});var ar=p((So,or)=>{"use strict";var sr=w(),ts=ir().positionX;or.exports=rs;function rs(e){e=sr.asNonCompoundGraph(e),ns(e),Object.entries(ts(e)).forEach(([t,r])=>e.node(t).x=r)}function ns(e){let t=sr.buildLayerMatrix(e),r=e.graph().ranksep,n=0;t.forEach(i=>{let s=i.reduce((o,a)=>{let l=e.node(a).height;return o>l?o:l},0);i.forEach(o=>e.node(o).y=n+s/2),n+=s+r})}});var pr=p((Mo,cr)=>{"use strict";var lr=Je(),dr=Ze(),is=pt(),ss=w().normalizeRanks,os=wt(),as=w().removeEmptyRanks,ur=Et(),ls=xt(),hr=It(),ds=Ht(),us=ar(),E=w(),hs=g().Graph;cr.exports=fs;function fs(e,t){let r=t&&t.debugTiming?E.time:E.notime;r("layout",()=>{let n=r("  buildLayoutGraph",()=>xs(e));r("  runLayout",()=>cs(n,r)),r("  updateInputGraph",()=>ps(e,n))})}function cs(e,t){t("    makeSpaceForEdgeLabels",()=>ks(e)),t("    removeSelfEdges",()=>Ms(e)),t("    acyclic",()=>lr.run(e)),t("    nestingGraph.run",()=>ur.run(e)),t("    rank",()=>is(E.asNonCompoundGraph(e))),t("    injectEdgeLabelProxies",()=>Ns(e)),t("    removeEmptyRanks",()=>as(e)),t("    nestingGraph.cleanup",()=>ur.cleanup(e)),t("    normalizeRanks",()=>ss(e)),t("    assignRankMinMax",()=>Os(e)),t("    removeEdgeLabelProxies",()=>Is(e)),t("    normalize.run",()=>dr.run(e)),t("    parentDummyChains",()=>os(e)),t("    addBorderSegments",()=>ls(e)),t("    order",()=>ds(e)),t("    insertSelfEdges",()=>Ts(e)),t("    adjustCoordinateSystem",()=>hr.adjust(e)),t("    position",()=>us(e)),t("    positionSelfEdges",()=>js(e)),t("    removeBorderNodes",()=>Ss(e)),t("    normalize.undo",()=>dr.undo(e)),t("    fixupEdgeLabelCoords",()=>Ls(e)),t("    undoCoordinateSystem",()=>hr.undo(e)),t("    translateGraph",()=>qs(e)),t("    assignNodeIntersects",()=>Ps(e)),t("    reversePoints",()=>Cs(e)),t("    acyclic.undo",()=>lr.undo(e))}function ps(e,t){e.nodes().forEach(r=>{let n=e.node(r),i=t.node(r);n&&(n.x=i.x,n.y=i.y,n.rank=i.rank,t.children(r).length&&(n.width=i.width,n.height=i.height))}),e.edges().forEach(r=>{let n=e.edge(r),i=t.edge(r);n.points=i.points,i.hasOwnProperty("x")&&(n.x=i.x,n.y=i.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height}var ms=["nodesep","edgesep","ranksep","marginx","marginy"],ws={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},bs=["acyclicer","ranker","rankdir","align"],gs=["width","height"],fr={width:0,height:0},Es=["minlen","weight","width","height","labeloffset"],vs={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},ys=["labelpos"];function xs(e){let t=new hs({multigraph:!0,compound:!0}),r=Q(e.graph());return t.setGraph(Object.assign({},ws,J(r,ms),E.pick(r,bs))),e.nodes().forEach(n=>{let i=Q(e.node(n)),s=J(i,gs);Object.keys(fr).forEach(o=>{s[o]===void 0&&(s[o]=fr[o])}),t.setNode(n,s),t.setParent(n,e.parent(n))}),e.edges().forEach(n=>{let i=Q(e.edge(n));t.setEdge(n,Object.assign({},vs,J(i,Es),E.pick(i,ys)))}),t}function ks(e){let t=e.graph();t.ranksep/=2,e.edges().forEach(r=>{let n=e.edge(r);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function Ns(e){e.edges().forEach(t=>{let r=e.edge(t);if(r.width&&r.height){let n=e.node(t.v),s={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};E.addDummyNode(e,"edge-proxy",s,"_ep")}})}function Os(e){let t=0;e.nodes().forEach(r=>{let n=e.node(r);n.borderTop&&(n.minRank=e.node(n.borderTop).rank,n.maxRank=e.node(n.borderBottom).rank,t=Math.max(t,n.maxRank))}),e.graph().maxRank=t}function Is(e){e.nodes().forEach(t=>{let r=e.node(t);r.dummy==="edge-proxy"&&(e.edge(r.e).labelRank=r.rank,e.removeNode(t))})}function qs(e){let t=Number.POSITIVE_INFINITY,r=0,n=Number.POSITIVE_INFINITY,i=0,s=e.graph(),o=s.marginx||0,a=s.marginy||0;function l(d){let u=d.x,h=d.y,f=d.width,c=d.height;t=Math.min(t,u-f/2),r=Math.max(r,u+f/2),n=Math.min(n,h-c/2),i=Math.max(i,h+c/2)}e.nodes().forEach(d=>l(e.node(d))),e.edges().forEach(d=>{let u=e.edge(d);u.hasOwnProperty("x")&&l(u)}),t-=o,n-=a,e.nodes().forEach(d=>{let u=e.node(d);u.x-=t,u.y-=n}),e.edges().forEach(d=>{let u=e.edge(d);u.points.forEach(h=>{h.x-=t,h.y-=n}),u.hasOwnProperty("x")&&(u.x-=t),u.hasOwnProperty("y")&&(u.y-=n)}),s.width=r-t+o,s.height=i-n+a}function Ps(e){e.edges().forEach(t=>{let r=e.edge(t),n=e.node(t.v),i=e.node(t.w),s,o;r.points?(s=r.points[0],o=r.points[r.points.length-1]):(r.points=[],s=i,o=n),r.points.unshift(E.intersectRect(n,s)),r.points.push(E.intersectRect(i,o))})}function Ls(e){e.edges().forEach(t=>{let r=e.edge(t);if(r.hasOwnProperty("x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function Cs(e){e.edges().forEach(t=>{let r=e.edge(t);r.reversed&&r.points.reverse()})}function Ss(e){e.nodes().forEach(t=>{if(e.children(t).length){let r=e.node(t),n=e.node(r.borderTop),i=e.node(r.borderBottom),s=e.node(r.borderLeft[r.borderLeft.length-1]),o=e.node(r.borderRight[r.borderRight.length-1]);r.width=Math.abs(o.x-s.x),r.height=Math.abs(i.y-n.y),r.x=s.x+r.width/2,r.y=n.y+r.height/2}}),e.nodes().forEach(t=>{e.node(t).dummy==="border"&&e.removeNode(t)})}function Ms(e){e.edges().forEach(t=>{if(t.v===t.w){var r=e.node(t.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}})}function Ts(e){var t=E.buildLayerMatrix(e);t.forEach(r=>{var n=0;r.forEach((i,s)=>{var o=e.node(i);o.order=s+n,(o.selfEdges||[]).forEach(a=>{E.addDummyNode(e,"selfedge",{width:a.label.width,height:a.label.height,rank:o.rank,order:s+ ++n,e:a.e,label:a.label},"_se")}),delete o.selfEdges})})}function js(e){e.nodes().forEach(t=>{var r=e.node(t);if(r.dummy==="selfedge"){var n=e.node(r.e.v),i=n.x+n.width/2,s=n.y,o=r.x-i,a=n.height/2;e.setEdge(r.e,r.label),e.removeNode(t),r.label.points=[{x:i+2*o/3,y:s-a},{x:i+5*o/6,y:s-a},{x:i+o,y:s},{x:i+5*o/6,y:s+a},{x:i+2*o/3,y:s+a}],r.label.x=r.x,r.label.y=r.y}})}function J(e,t){return E.mapValues(E.pick(e,t),Number)}function Q(e){var t={};return e&&Object.entries(e).forEach(([r,n])=>{typeof r=="string"&&(r=r.toLowerCase()),t[r]=n}),t}});var wr=p((To,mr)=>{var _s=w(),Rs=g().Graph;mr.exports={debugOrdering:Gs};function Gs(e){let t=_s.buildLayerMatrix(e),r=new Rs({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(n=>{r.setNode(n,{label:n}),r.setParent(n,"layer"+e.node(n).rank)}),e.edges().forEach(n=>r.setEdge(n.v,n.w,{},n.name)),t.forEach((n,i)=>{let s="layer"+i;r.setNode(s,{rank:"same"}),n.reduce((o,a)=>(r.setEdge(o,a,{style:"invis"}),a))}),r}});var gr=p((jo,br)=>{br.exports="1.0.4"});var vr=p((_o,Er)=>{Er.exports={graphlib:g(),layout:pr(),debug:wr(),util:{time:w().time,notime:w().notime},version:gr()}});var S=qr(vr(),1);function Vs(e,t){if(e.points.length<2)return"";let r=e.points[e.points.length-1],n=e.points[e.points.length-2],i=r.x-n.x,s=r.y-n.y,o=Math.sqrt(i*i+s*s),a=(o-t)/o,l=n.x+i*a,d=n.y+s*a,u=e.points.slice(0,-1).concat([{x:l,y:d}]);return"M"+u.map(h=>`${h.x},${h.y}`).join("L")}function As(e){let t=0;for(let r=0;r<e.length-1;r++){let n=e[r+1].x-e[r].x,i=e[r+1].y-e[r].y;t+=Math.sqrt(n*n+i*i)}return t}function Fs(e,t){let r=0;for(let n=0;n<e.length-1;n++){let i=e[n+1].x-e[n].x,s=e[n+1].y-e[n].y,o=Math.sqrt(i*i+s*s);if(r+o>=t){let a=(t-r)/o;return{x:e[n].x+a*i,y:e[n].y+a*s}}r+=o}return e[0]}var Z=class extends HTMLElement{constructor(){super();this.previousState="";this.currentState="";this.currentEvent="";this.init=this.init.bind(this),this.render=this.render.bind(this)}connectedCallback(){let r=this.getAttribute("src");if(!r)return;let n=this.getAttribute("sub");if(n){let i=document.querySelector(n);i&&(this.currentState=i.state,i.sub((s,o)=>{this.previousState=this.currentState,this.currentState=s,this.currentEvent=o,this.render()}))}fetch(r).then(i=>i.json().then(this.init))}init(r){this.config=r,this.render()}render(){if(!this.config)return;let{states:r,initialState:n}=this.config;var i=new S.graphlib.Graph;i.setGraph({marginx:20,marginy:20,nodesep:20,edgesep:100}),i.setDefaultEdgeLabel(()=>({})),i.setNode(n,{label:n,width:150,height:50}),Object.entries(r).forEach(([o],a,l)=>{i.setNode(o,{label:o,width:150,height:50});for(let d in r[o]){let u=r[o][d].filter(c=>c[0]==="state")[0];if(!u)continue;let h=u[1],f=`${o}-${d}-${h}`;i.setEdge(o,h,{label:d,id:f})}}),S.layout(i);let s='<svg width="'+i.graph().width+'" height="'+i.graph().height+'" xmlns="http://www.w3.org/2000/svg" style="border:1px solid black; font-family: monospace; border-radius:5px;">';s+=`
  <defs>
  <marker id="arrowhead" markerWidth="10" markerHeight="8.66" 
    refX="0" refY="4.33" orient="auto">
      <polygon fill="grey" points="0 8.66, 10 4.33, 0 0" />
    </marker>
  </defs>`,i.nodes().forEach((o,a)=>{let l=i.node(o),d=l.label===this.currentState?3:1;s+=`<rect rx="5" x="${l.x-l.width/2}" y="${l.y-l.height/2}" width="${l.width}" height="${l.height}" style="fill: white; stroke: black; stroke-width:${d};"/>`,s+=`<text x="${l.x}" y="${l.y}" text-anchor="middle" alignment-baseline="central">${l.label}</text>`}),i.edges().forEach((o,a)=>{let l=i.edge(o),d=Vs(l,10),u=l.id===`${this.previousState}-${this.currentEvent}-${this.currentState}`?"black":"#b2b2b2";s+=`<path d="${d}" style="fill: none; stroke: ${u};" marker-end="url(#arrowhead)"/>`;let h=As(l.points),f=Fs(l.points,h/2),c=l.label,m=12,b=3,v=c.length*(m/1.5),k=m;s+=`<rect rx="3" x="${f.x-v/2-b}" y="${f.y-k/2-b}" width="${v+2*b}" height="${k+2*b}" fill="${u}" />`,s+=`<text fill="white" x="${f.x}" y="${f.y}" text-anchor="middle" alignment-baseline="middle" font-size="${m}">${c}</text>`}),s+="</svg>",this.innerHTML=s}};customElements.define("dx-x-chart",Z);})();
//# sourceMappingURL=dx-debugger.js.map
