{
  "$schema": "domx.json",
  "initialState": "init",
  "states": {
    "init": {
      "entry": [
        ["call", "#todo__input", "focus"],
        ["get", "/api/todo"]
      ],
      "renderTodos": [
        ["server", "todoList"],
        ["state", "ready"]
      ]
    },
    "ready": {
      "addNew": [
        ["attr", "#todo__input", "disabled", true],
        ["attr", "#todo__btn", "disabled", true],
        ["post", "/api/todo", ["todo", "#todo__input", "value"]],
        ["state", "procAddNew"]
      ],
      "markDone": [
        ["attr", "#todo__input", "disabled", true],
        ["attr", "#todo__btn", "disabled", true],
        ["put", "/api/todo", ["todo", "#todo__input", "value"]],
        ["state", "procMarkDone"]
      ]
    },
    "procAddNew": {
      "success": [
        ["wait", 1000],
        ["server", "appendTodo"],
        ["attr", "#todo__btn", "disabled", null],
        ["attr", "#todo__input", "disabled", null],
        ["call", "#todo__form", "reset"],
        ["call", "#todo__input", "focus"],
        ["state", "ready"]
      ],
      "error": [["server"]]
    },
    "procMarkDone": {
      "success": [
        ["server", "appendTodo"],
        ["attr", "#todo__btn", "disabled", null],
        ["attr", "#todo__input", "disabled", null],
        ["call", "#todo__form", "reset"],
        ["call", "#todo__input", "focus"],
        ["state", "ready"]
      ],
      "error": [["server"]]
    }
  }
}
